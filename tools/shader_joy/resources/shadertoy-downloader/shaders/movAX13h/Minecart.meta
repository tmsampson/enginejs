{
	"Shader": {
		"ver": "0.1",
		"info": {
			"id": "4dsXzS",
			"date": "1403318971",
			"viewed": 1812,
			"name": "Minecart",
			"username": "movAX13h",
			"description": "My entry to the inofficial, nonexistent st mine compo <img src=\"/img/emoticonHappy.png\"/> Click and hold to sit in cart.<br/>Performancewise ... I think it was a big mistake to lookup textures inside the scene function. Will avoid that in future.",
			"likes": 23,
			"published": 3,
			"flags": 8,
			"tags": [
				"raymarch",
				"sound",
				"mine",
				"cart"
			],
			"hasliked": 0
		},
		"renderpass": [
			{
				"inputs": [
					{
						"id": 3,
						"src": "/presets/tex02.jpg",
						"ctype": "texture",
						"channel": 2
					},
					{
						"id": 7,
						"src": "/presets/tex06.jpg",
						"ctype": "texture",
						"channel": 0
					},
					{
						"id": 10,
						"src": "/presets/tex09.jpg",
						"ctype": "texture",
						"channel": 1
					}
				],
				"outputs": [
					{
						"channel": "0",
						"dst": "-1"
					},
					{
						"channel": "0",
						"dst": "-1"
					},
					{
						"channel": "0",
						"dst": "-1"
					}
				],
				"code": "",
				"name": "",
				"description": "",
				"type": "image"
			},
			{
				"inputs": [
					{
						"id": 9,
						"src": "/presets/tex08.jpg",
						"ctype": "texture",
						"channel": 3
					}
				],
				"outputs": [
					{
						"channel": "0",
						"dst": "-1"
					}
				],
				"code": "// by srtuss (modified slightly)\n\n#define NSPC 256\n#define pi2 6.283185307179586476925286766559\n\nvec2 synth1(float t)\n{\n\tvec2 v = vec2(0.0);\n\tfloat base = 50.0 + sin(t * 0.1) * 20.0;\n\tfloat flt = cos(t * 1.0) * 6.0 + 10.0;\n\tfloat fmd = smoothstep(-0.1, 0.1, sin(t * 1.0)) * 100.0;\n\tfor(int i = 0; i < NSPC; i ++)\n\t{\n\t\tfloat h = float(i + 1);\n\t\tfloat inten = 1.0 / h;\n\t\t\n\t\tvec2 ti = texture2D(iChannel3, vec2(h / 256.0, t * 0.1)).xy;\n\t\t\n\t\tfloat f = ti.y * fmd;\n\t\t\n\t\tinten *= pow(ti.x, 8.0);\n\t\tinten *= exp(-max(4.0 - h * 2.0, 0.0));\n\t\tinten *= mod(h, 2.0);\n\t\t\n\t\tv.x += inten * sin(0.5 + pi2 * (t * base * h) + f);\n\t\tv.y += inten * sin(pi2 * (t * base * h) + f);\n\t}\n\treturn v;\n}\n\nfloat rnd(float x)\n{\n\treturn fract(sin(x * 197.972) * 29728.58762);\n}\n\nfloat band(float h, float t)\n{\n\tt *= 0.3;\n\tfloat s = sin(t * pi2 * 0.5) + 1.01;\n\treturn smoothstep(s * 0.1, 0.0, mod(t - rnd(h), rnd(-h) * 3.0 + 0.5));\n}\n\nvec2 synth2(float t)\n{\n\tvec2 v = vec2(0.0);\n\tfloat base = 90.0;\n\tfloat flt = cos(t * 1.0) * 6.0 + 10.0;\n\tfor(int i = 0; i < NSPC; i ++)\n\t{\n\t\tfloat h = float(i + 1);\n\t\tfloat inten = 1.0 / h;\n\t\n\t\tinten *= band(h, t);\n\t\t\n\t\tv.x += inten * sin(t + pi2 * (t * base * h));\n\t\tv.y += inten * sin(pi2 * (t * base * h));\n\t}\n\treturn v;\n}\n\nvec2 mainSound(float time)\n{\n\tvec2 m1 = synth1(time);\n\tfloat ec = 0.5, fb = 0.8, et = 0.3, tm = 0.3;\n\tm1 += synth1(time - et) * ec * vec2(1.0, 0.2); ec *= fb; et += tm;\n\tm1 += synth1(time - et) * ec * vec2(0.2, 1.0); ec *= fb; et += tm;\n\tm1 += synth1(time - et) * ec * vec2(1.0, 0.2); ec *= fb; et += tm;\n\tm1 += synth1(time - et) * ec * vec2(0.2, 1.0); ec *= fb; et += tm;\n\t\n\tvec2 m2 = synth2(time);\n\tec = 0.5, fb = 0.8, et = 0.3, tm = 0.3;\n\tm2 += synth2(time - et).yx * ec * vec2(1.0, 0.5); ec *= fb; et += tm;\n\tm2 += synth2(time - et) * ec * vec2(0.5, 1.0); ec *= fb; et += tm;\n\tm2 += synth2(time - et).yx * ec * vec2(1.0, 0.5); ec *= fb; et += tm;\n\tm2 += synth2(time - et) * ec * vec2(0.5, 1.0); ec *= fb; et += tm;\n\t\n\treturn 1.3*m1 + 0.1*m2;\n\t//return 0.7*m1 + 0.6*m2;\n}",
				"name": "",
				"description": "",
				"type": "sound"
			}
		]
	}
}